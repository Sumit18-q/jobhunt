<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Account - JobHunt</title>
   <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
<header class="header">
   <section class="flex">
      <div id="menu-btn" class="fas fa-bars-staggered"></div>
      <a href="{{ url_for('home') }}" class="logo"><i class="fas fa-briefcase"></i> JobHunt.</a>
      <nav class="navbar">
         <a href="{{ url_for('home') }}">home</a>
         <a href="{{ url_for('about') }}">about us</a>
         <a href="{{ url_for('jobs') }}">all jobs</a>
         <a href="{{ url_for('contact') }}">contact us</a>
         <a href="{{ url_for('account') }}">account</a>
         <a href="{{ url_for('messages') }}">messages</a>
      </nav>
      <a href="{{ url_for('logout') }}" class="btn" style="margin-top: 0;">logout</a>
   </section>
</header>

<section class="account-container">
   <div class="account-form">
      <h3>my account</h3>
      <div class="account-info">
         <div class="info-item">
            <label>Name:</label>
            <span>{{ user.name }}</span>
         </div>
         <div class="info-item">
            <label>Email:</label>
            <span>{{ user.email }}</span>
         </div>
         <div class="info-item">
            <label>Member Since:</label>
            <span>{{ user.created_at.strftime('%B %Y') if user.created_at else 'N/A' }}</span>
         </div>
         {% if profile %}
         <div class="info-item">
            <label>Phone:</label>
            <span>{{ profile.phone or 'Not provided' }}</span>
         </div>
         <div class="info-item">
            <label>Location:</label>
            <span>{{ profile.location or 'Not provided' }}</span>
         </div>
         <div class="info-item">
            <label>Current Position:</label>
            <span>{{ profile.current_position or 'Not provided' }}</span>
         </div>
         {% endif %}
      </div>
      <div class="account-actions">
         <a href="{{ url_for('profile') }}" class="btn">edit profile</a>
         <a href="{{ url_for('jobs') }}" class="btn">browse jobs</a>
         <a href="{{ url_for('post_job') }}" class="btn">post a job</a>
      </div>
   </div>

   {% if applications %}
   <div class="applications-section">
      <h3>My Job Applications</h3>
      <div class="applications-list">
         {% for application in applications %}
         <div class="application-item">
            <div class="application-header">
               <h4>{{ application.job.title }}</h4>
               <span class="status status-{{ application.status }}">{{ application.status.title() }}</span>
            </div>
            <div class="application-meta">
               <span><i class="fas fa-building"></i> {{ application.job.company }}</span>
               <span><i class="fas fa-calendar"></i> Applied {{ application.applied_at.strftime('%B %d, %Y') }}</span>
            </div>
            {% if application.cover_letter %}
            <div class="cover-letter-preview">
               <strong>Cover Letter:</strong>
               <p>{{ application.cover_letter[:150] }}...</p>
            </div>
            {% endif %}
            <a href="{{ url_for('job_details', job_id=application.job.id) }}" class="btn small">View Job</a>
         </div>
         {% endfor %}
      </div>
   </div>
   {% endif %}

   {% if saved_jobs %}
   <div class="saved-jobs-section">
      <h3>Saved Jobs</h3>
      <div class="saved-jobs-list">
         {% for saved in saved_jobs %}
         <div class="saved-job-item">
            <div class="saved-job-header">
               <h4>{{ saved.job.title }}</h4>
               <span class="saved-date">Saved {{ saved.saved_at.strftime('%B %d, %Y') }}</span>
            </div>
            <div class="saved-job-meta">
               <span><i class="fas fa-building"></i> {{ saved.job.company }}</span>
               <span><i class="fas fa-map-marker-alt"></i> {{ saved.job.location }}</span>
               <span><i class="fas fa-indian-rupee-sign"></i> {{ saved.job.salary }}</span>
            </div>
            <div class="saved-job-actions">
               <a href="{{ url_for('job_details', job_id=saved.job.id) }}" class="btn small">View Details</a>
               <a href="{{ url_for('apply_job', job_id=saved.job.id) }}" class="btn small primary">Apply Now</a>
            </div>
         </div>
         {% endfor %}
      </div>
   </div>
   {% endif %}
</section>

<footer class="footer">
   <div class="credit">&copy; copyright @ 2025 by <span>JOB HUNT</span> | all rights reserved!</div>
</footer>

<script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
